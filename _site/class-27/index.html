<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <title>Class 27 | UY-23</title>
  <link rel="icon" href="http://localhost:4000/uy23/assets/images/page/favicon.ico">
  <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-wvfXpqpZZVQGK6TAh5PVlGOfQNHSoD2xbE+QkPxCAFlNEevoEH3Sl0sibVcOQVnN" crossorigin="anonymous">
  <link rel="stylesheet" href="/uy23/assets/bootstrap/bootstrap.min.css">
  <link rel="stylesheet" href="/uy23/css/style.css">
</head>
<body class="bg_random_color">
  <nav class="navbar navbar-expand-lg navbar-light bg-light">
    <div class="container">
      <a class="navbar-brand" href="http://localhost:4000/uy23/">UY-23</a>
      <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>

      <div class="collapse navbar-collapse" id="navbarSupportedContent">
        <ul class="navbar-nav ml-auto">
          <li class="nav-item ">
            <a class="nav-link" href="http://localhost:4000/uy23/">Home <span class="sr-only">(current)</span></a>
          </li>
          <li class="nav-item ">
            <a class="nav-link" href="http://localhost:4000/uy23/about">About</a>
          </li>
          <li class="nav-item ">
            <a class="nav-link" href="http://localhost:4000/uy23/type" target="_blank">Type</a>
          </li>
          <li class="nav-item ">
            <a class="nav-link" href="http://localhost:4000/uy23/students">Students</a>
          </li>
          <li class="nav-item ">
            <a href="http://localhost:4000/uy23/notices" class="nav-link">Notices</a>
          </li>
        </ul>
      </div>
    </div>
  </nav>


<div class="container bg-light py-5 my-5">
  <div class="py-2 text-center">
      <h1 class="title">
        Class 27
      </h1>
      <h3 class="text-muted">
          Jan 18, 2018 - Thu
      </h3>
      </h1>
      <hr>
      <div>
        
          <a target="_blank" class="btn btn-lg btn-outline-info mx-3 my-3" href="https://github.com/poloey/27_uy23_jan_18">View On Github</a>
        
        
          <a class="btn btn-lg btn-outline-danger mx-3" href="https://codeload.github.com/poloey/27_uy23_jan_18/zip/master">Download class file</a>
        
      </div>
      <hr>
  </div>

  <div class="">
    <h1 id="crud-in-php-mysql">CRUD in php mysql</h1>

<h2 id="table-create-and-database">table create and database</h2>
<p>Started mysql server. Login to mysql and create a database.    <br />
connect with database and create table using php. today we connect php with mysql using pdo(PHP data object)</p>

<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="nv">$dsn</span> <span class="o">=</span> <span class="s1">'mysql:host=localhost;dbname=school'</span><span class="p">;</span>

<span class="nv">$con</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">PDO</span><span class="p">(</span><span class="nv">$dsn</span><span class="p">,</span> <span class="s1">'root'</span><span class="p">,</span> <span class="s1">''</span><span class="p">);</span>
<span class="nv">$con</span><span class="o">-&gt;</span><span class="na">query</span><span class="p">(</span><span class="s2">"create table teachers (
  id int(11) auto_increment primary key,
  name varchar(30) not null,
  email varchar(30)
)"</span><span class="p">);</span>
</code></pre></div></div>

<h2 id="create-data">Create data</h2>
<p>make a html form. In this video I am using same page as form action. In such case, we have to check whether form is submitted or not using <code class="highlighter-rouge">isset</code> and any other helper functions. Today weâ€™ve used isset function. Once we extract from data using <code class="highlighter-rouge">$_POST</code> super global we connect with database and insert form data to database</p>

<p>Html part</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;form action="" method="post"&gt;
  &lt;div class="form-group"&gt;
    &lt;label for="name"&gt;Name&lt;/label&gt;
    &lt;input type="text" name="name" id="name" class="form-control"&gt;
  &lt;/div&gt;
  &lt;div class="form-group"&gt;
    &lt;label for="email"&gt;Email&lt;/label&gt;
    &lt;input type="text" name="email" id="email" class="form-control"&gt;
  &lt;/div&gt;
  &lt;div class="form-group"&gt;
    &lt;button type="submit" class="btn btn-outline-info"&gt;Add a teacher&lt;/button&gt;
  &lt;/div&gt;
&lt;/form&gt;
  
</code></pre></div></div>

<p>php part</p>

<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="k">if</span> <span class="p">(</span><span class="nb">isset</span><span class="p">(</span><span class="nv">$_POST</span><span class="p">[</span><span class="s1">'name'</span><span class="p">])</span> <span class="o">&amp;&amp;</span> <span class="nb">isset</span><span class="p">(</span><span class="nv">$_POST</span><span class="p">[</span><span class="s1">'email'</span><span class="p">]))</span> <span class="p">{</span>
  <span class="nv">$name</span> <span class="o">=</span> <span class="nv">$_POST</span><span class="p">[</span><span class="s1">'name'</span><span class="p">];</span>
  <span class="nv">$email</span> <span class="o">=</span> <span class="nv">$_POST</span><span class="p">[</span><span class="s1">'email'</span><span class="p">];</span>
  <span class="nv">$con</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">PDO</span><span class="p">(</span><span class="s1">'mysql:host=localhost;dbname=school'</span><span class="p">,</span> <span class="s1">'root'</span><span class="p">,</span> <span class="s1">''</span><span class="p">);</span>
  <span class="nv">$statement</span> <span class="o">=</span> <span class="nv">$con</span><span class="o">-&gt;</span><span class="na">prepare</span><span class="p">(</span><span class="s2">"insert into teachers(name, email) values(:name, :email)"</span><span class="p">);</span>
  <span class="nv">$statement</span><span class="o">-&gt;</span><span class="na">execute</span><span class="p">([</span>
    <span class="s1">':name'</span> <span class="o">=&gt;</span> <span class="nv">$name</span><span class="p">,</span>
    <span class="s1">':email'</span> <span class="o">=&gt;</span> <span class="nv">$email</span>
  <span class="p">]);</span>
<span class="p">}</span>
</code></pre></div></div>

<h2 id="read">Read</h2>

<p>Connect to database. fetch all data from database. and Iterate data in html table</p>

<p>php part</p>

<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$con</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">PDO</span><span class="p">(</span><span class="s1">'mysql:host=localhost;dbname=school'</span><span class="p">,</span> <span class="s1">'root'</span><span class="p">,</span> <span class="s1">''</span><span class="p">);</span>
<span class="nv">$statement</span> <span class="o">=</span> <span class="nv">$con</span><span class="o">-&gt;</span><span class="na">prepare</span><span class="p">(</span><span class="s1">'select * from teachers order by id desc'</span><span class="p">);</span>
<span class="nv">$statement</span><span class="o">-&gt;</span><span class="na">execute</span><span class="p">();</span>
<span class="nv">$teachers</span> <span class="o">=</span> <span class="nv">$statement</span><span class="o">-&gt;</span><span class="na">fetchAll</span><span class="p">(</span><span class="nx">PDO</span><span class="o">::</span><span class="na">FETCH_OBJ</span><span class="p">);</span>
</code></pre></div></div>

<p>html part</p>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">&lt;?php foreach($teachers as $teacher): ?&gt;</span>
<span class="nt">&lt;tr&gt;</span>
  <span class="nt">&lt;td&gt;</span><span class="cp">&lt;?= $teacher-&gt;id; ?&gt;</span><span class="nt">&lt;/td&gt;</span>
  <span class="nt">&lt;td&gt;</span><span class="cp">&lt;?= $teacher-&gt;name; ?&gt;</span><span class="nt">&lt;/td&gt;</span>
  <span class="nt">&lt;td&gt;</span><span class="cp">&lt;?= $teacher-&gt;email; ?&gt;</span><span class="nt">&lt;/td&gt;</span>
  <span class="nt">&lt;td&gt;</span>
    <span class="nt">&lt;a</span> <span class="na">class=</span><span class="s">"btn btn-info"</span> <span class="na">href=</span><span class="s">"edit.php?id=&lt;?= $teacher-&gt;id; ?&gt;"</span><span class="nt">&gt;</span>Edit<span class="nt">&lt;/a&gt;</span>
    <span class="nt">&lt;a</span> <span class="na">class=</span><span class="s">"btn btn-warning"</span> <span class="na">href=</span><span class="s">"delete.php?id=&lt;?= $teacher-&gt;id; ?&gt;"</span><span class="nt">&gt;</span>Delete<span class="nt">&lt;/a&gt;</span>
  <span class="nt">&lt;/td&gt;</span>
<span class="nt">&lt;/tr&gt;</span>
<span class="cp">&lt;?php endforeach; ?&gt;</span>
</code></pre></div></div>

<h2 id="edit">Edit</h2>
<p>Edit part is like create part. we just populate predefined value from existing data. We will access id using <code class="highlighter-rouge">$_GET</code> super global. once we have id we can easily get from database and giving value to form field</p>

<p>php part</p>

<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$id</span> <span class="o">=</span> <span class="nv">$_GET</span><span class="p">[</span><span class="s1">'id'</span><span class="p">];</span>
<span class="nv">$con</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">PDO</span><span class="p">(</span><span class="s1">'mysql:host=localhost;dbname=school'</span><span class="p">,</span> <span class="s1">'root'</span><span class="p">,</span> <span class="s1">''</span><span class="p">);</span>
<span class="nv">$statement</span> <span class="o">=</span> <span class="nv">$con</span><span class="o">-&gt;</span><span class="na">prepare</span><span class="p">(</span><span class="s1">'select * from teachers where id=:id'</span><span class="p">);</span>
<span class="nv">$statement</span><span class="o">-&gt;</span><span class="na">execute</span><span class="p">([</span>
  <span class="s1">':id'</span> <span class="o">=&gt;</span> <span class="nv">$id</span>
<span class="p">]);</span>
<span class="nv">$teacher</span> <span class="o">=</span> <span class="nv">$statement</span><span class="o">-&gt;</span><span class="na">fetch</span><span class="p">(</span><span class="nx">PDO</span><span class="o">::</span><span class="na">FETCH_OBJ</span><span class="p">);</span>
</code></pre></div></div>

<p>html part</p>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;input</span> <span class="na">value=</span><span class="s">"&lt;?= $teacher-&gt;name; ?&gt;"</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">name=</span><span class="s">"name"</span> <span class="na">id=</span><span class="s">"name"</span> <span class="na">class=</span><span class="s">"form-control"</span><span class="nt">&gt;</span>
</code></pre></div></div>

<h2 id="update">Update</h2>

<p>update is like create row in database. we will extract data from form and update to database using update sql query. Once update is successful we will redirect user to home page</p>

<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">if</span> <span class="p">(</span><span class="nb">isset</span><span class="p">(</span><span class="nv">$_POST</span><span class="p">[</span><span class="s1">'name'</span><span class="p">])</span> <span class="o">&amp;&amp;</span> <span class="nb">isset</span><span class="p">(</span><span class="nv">$_POST</span><span class="p">[</span><span class="s1">'email'</span><span class="p">]))</span> <span class="p">{</span>
  <span class="nv">$name</span> <span class="o">=</span> <span class="nv">$_POST</span><span class="p">[</span><span class="s1">'name'</span><span class="p">];</span>
  <span class="nv">$email</span> <span class="o">=</span> <span class="nv">$_POST</span><span class="p">[</span><span class="s1">'email'</span><span class="p">];</span>
  <span class="nv">$statement</span> <span class="o">=</span> <span class="nv">$con</span><span class="o">-&gt;</span><span class="na">prepare</span><span class="p">(</span><span class="s2">"update teachers set name=:name, email=:email where id=:id"</span><span class="p">);</span>
  <span class="nv">$statement</span><span class="o">-&gt;</span><span class="na">execute</span><span class="p">([</span>
    <span class="s1">':name'</span> <span class="o">=&gt;</span> <span class="nv">$name</span><span class="p">,</span>
    <span class="s1">':email'</span> <span class="o">=&gt;</span> <span class="nv">$email</span><span class="p">,</span>
    <span class="s1">':id'</span> <span class="o">=&gt;</span> <span class="nv">$id</span><span class="p">,</span>
  <span class="p">]);</span>
  <span class="nb">header</span><span class="p">(</span><span class="s1">'location: /'</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div></div>

<h2 id="delete">Delete</h2>

<p>We will access id using <code class="highlighter-rouge">$_GET</code> super global. once we have id we will delete that row and redirect back to read page using header function.</p>

<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="nv">$id</span> <span class="o">=</span> <span class="nv">$_GET</span><span class="p">[</span><span class="s1">'id'</span><span class="p">];</span>
<span class="nv">$con</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">PDO</span><span class="p">(</span><span class="s1">'mysql:dbname=school;host=localhost'</span><span class="p">,</span> <span class="s1">'root'</span><span class="p">,</span> <span class="s1">''</span><span class="p">);</span>
<span class="nv">$statement</span> <span class="o">=</span> <span class="nv">$con</span><span class="o">-&gt;</span><span class="na">prepare</span><span class="p">(</span><span class="s1">'delete from teachers where id=:id'</span><span class="p">);</span>
<span class="nv">$statement</span><span class="o">-&gt;</span><span class="na">execute</span><span class="p">([</span>
  <span class="s1">':id'</span> <span class="o">=&gt;</span> <span class="nv">$id</span>
<span class="p">]);</span>

<span class="nb">header</span><span class="p">(</span><span class="s1">'location: /'</span><span class="p">);</span>

</code></pre></div></div>


  </div>

  <div class="text-center p-5">
    
      <a class="btn btn-info btn-lg .d-inline-block my-1" href="http://localhost:4000/uy23/class-26/">&laquo; Class 26</a>
    
    
      <a class="btn btn-success btn-lg .d-inline-block my-1" href="http://localhost:4000/uy23/class-28/">Class 28 &raquo;</a>
    
  </div>


    <div class="my-5">
    <div id="disqus_thread"></div>
    <script>

    /**
    *  RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
    *  LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables*/
    /*
    var disqus_config = function () {
    this.page.url = PAGE_URL;  // Replace PAGE_URL with your page's canonical URL variable
    this.page.identifier = PAGE_IDENTIFIER; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
    };
    */
    (function() { // DON'T EDIT BELOW THIS LINE
    var d = document, s = d.createElement('script');
    s.src = 'https://ey-h43.disqus.com/embed.js';
    s.setAttribute('data-timestamp', +new Date());
    (d.head || d.body).appendChild(s);
    })();
    </script>
    <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
  </div>

</div>


  <footer class="bg_random_color text-light py-5 mt-5">
    <div class="container">
      
      <p><a class="text-light text-underline" href="http://localhost:4000/uy23/">UY-23</a> is maintained by Shibu deb polo.</p>
      <p> <a class="btn-link text-light" href="https://poloey.gitlab.io/"> <i class="fa fa-github" aria-hidden="true"></i> All Batches </a> </p>
      <p>
        <a class="btn-link text-light" target="_blank" href="https://www.facebook.com/groups/topupuy23/">
          <i class="fa fa-facebook" aria-hidden="true"></i>
          Group
        </a>
      </p>
      <p>
        <a class="btn-link text-light" target="_blank" href="https://web.facebook.com/messages/t/1710131265718158">
          <i class="fa fa-facebook" aria-hidden="true"></i>
          messenger
        </a>
      </p>
      <p class="footer-text">
        Hosted on Github Page. This Website will be references for LICT UY-23 batch for life time. Since Github page will never down. Thanks to opensource technology. Hope this attempt make work flow easier for all students of UY-23 batch. Added daily documentation and class file in this website
      </p>
    </div>
  </footer>
  <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js"></script>
  <script src="/uy23/assets/bootstrap/popper.min.js"></script>
  <script src="/uy23/assets/bootstrap/bootstrap.min.js"></script>
  <script src="/uy23/assets/bootstrap/color.js"></script>
</body>
</html>
